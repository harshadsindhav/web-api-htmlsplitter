<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <meta name="copyright" content="(C) Copyright 2017">
  <meta name="DC.rights.owner" content="(C) Copyright 2017">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Coverage" content="DRAFT">
  <meta name="DC.Relation" scheme="URI" content="../developer/part-restwebservices.html">
  <meta name="prodname" content="REST API Reference">
  <meta name="version" content="">
  <meta name="release" content="">
  <meta name="modification" content="">
  <meta name="DC.Creator" content="">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="d0e430">
  <link rel="stylesheet" type="text/css" href="../commonltr.css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic" rel="stylesheet">
  <link href="./../../../styles.css" rel="stylesheet">
    <style>
	table {
		line-height:28px;
	}

	h5 {
		font-weight : bold;
		color : darkcyan;
		letter-spacing: 1px;
	}
	article .topic {
		margin-top:20px;
	}
	tr th {
		text-align:center;
	}
	tr td {
		padding-left:10px;
	}

  </style>
  <title>Introduction</title>
</head>

<body id="d0e430">
  <main role="main">
    <article role="article" aria-labelledby="ariaid-title1">
      <article class="topic nested1" aria-labelledby="ariaid-title3" id="d0e52">
        <h4 class="title topictitle2" id="ariaid-title3">Usage</h4>
        <div class="body">
          <p class="p">Saba web services are based on
            <strong class="ph b">REpresentational State Transfer</strong> &nbsp;(
            <strong class="ph b">REST</strong>
            ). When client initiates requests (that includes values for all parameters that the web service requires), the server process
            these requests and returns appropriate responses. Requests and responses are built around the transfer of representations
            of resources. REST requests and responses are transmitted through an HTTP connection.
          </p>
        </div>
        <article class="topic nested2" aria-labelledby="ariaid-title4" id="d0e64">
          <h5 class="title topictitle3" id="ariaid-title4">Authentication</h5>
          <div class="body">
            <p class="p">Saba web services respond to requests from client code only if the requests are accompanied by authentication
              -- that is, by proof that the request is being made by a user with a valid Saba user ID and password.</p>
            <p class="p">The authentication is provided in the form of an
              <em class="ph i">authentication certificate
              </em> generated by the Authentication web service. The certificate must be included as a
              <strong class="ph b">header</strong> parameter in calls to all Saba web services (other than the Authentication web service itself).</p>
          </div>
        </article>
        <article class="topic nested2" aria-labelledby="ariaid-title5" id="topic_n52_wmz_wp">
          <h5 class="title topictitle3" id="ariaid-title5">URL Format</h5>
          <div class="body">
            <div class="p">
              <pre class="pre codeblock"><code><strong class="ph b">{protocol}</strong>://<strong class="ph b">{hostname}</strong>-api.sabacloud.com /<strong class="ph b">{version}</strong>/<strong class="ph b">{endpoint}</strong></code></pre>
            </div>
            <p class="p">
              <strong class="ph b">protocol</strong> - https</p>
            <p class="p">
              <strong class="ph b">hostname</strong> - Is your Saba site name.</p>
            <p class="p">
              <strong class="ph b">version</strong> - Is the version of the end point.</p>
            <div class="p">
              <strong class="ph b">endpoint</strong> - Is the path to the API method.
              <div class="note note note_note">
                <span class="note__title">Note:</span>
                <p class="p">endpoint varies per API call. Endpoints are documented in this guide and will include the endpoint's version
                  as well as the API method and the appropriate Calling Options.</p>
              </div>
            </div>
            <p class="p">
              <strong class="ph b">Example:</strong>
            </p>
            <p class="p">Let us assume you are a Saba Cloud customer. </p>
            <div class="p">Your URL is:
              <pre class="pre codeblock"><code>https://sabacustomer.sabacloud.com/</code></pre>The URL format to be used in APIs for "Location" endpoint is:</div>
            <div class="p">
              <pre class="pre codeblock"><code>https://sabacloudcustomer-api.sabacloud.com/v1/location/</code></pre>protocol:
              <strong class="ph b">https</strong>
            </div>
            <div class="p">hostname:
              <strong class="ph b">sabacloudcustomer</strong>
              <div class="note note note_note">
                <span class="note__title">Note:</span> You can get the hostname by submitting a support request. </div>
            </div>
            <p class="p">version:
              <strong class="ph b">v1</strong>
            </p>
            <p class="p">endpoint:
              <strong class="ph b">location </strong>
            </p>
          </div>
        </article>
        <article class="topic nested2" aria-labelledby="ariaid-title6" id="d0e89">
          <h5 class="title topictitle3" id="ariaid-title6">Calling Saba RESTful Web Services from Java</h5>
          <div class="body">
            <p class="p">The following code snippet shows how the authentication service is invoked from Java:
            </p>
            <div class="p">
              <pre class="pre codeblock"><code>private String getSabaCertificate(String hostUrl, String username, String password, String site){
	StringBuilder urlBuilder= new StringBuilder();
	urlBuilder.append(hostUrl).append("/Saba/api/");
	hostUrl = urlBuilder.toString();
	try {
	// connect and get the certificate with login service
		DefaultHttpClient httpClient = new DefaultHttpClient();
		HttpGet getRequest = new HttpGet("https://sabacloudcustomer-api.sabacloud.com/v1/login");
		getRequest.addHeader("accept", "application/json");
		getRequest.addHeader("user", username);
		getRequest.addHeader("password", password);

		getRequest.addHeader("site", site);
		HttpResponse response = httpClient.execute(getRequest);

		if (response.getStatusLine().getStatusCode() != 200) {
			throw new RuntimeException("Failed : HTTP error code : "
			   + response.getStatusLine().getStatusCode());
		}

		BufferedReader br = new BufferedReader(
		new InputStreamReader((response.getEntity().getContent())));

		String output;
		while ((output = br.readLine()) != null) {
			certificate = output;
		}
		httpClient.getConnectionManager().shutdown();
		return certificate;
	  } catch(Exception e){
		  e.printStackTrace();
	}
	return "";
}

private String parseCertificate(String certToParse){
	String cert = certToParse.substring(certToParse.lastIndexOf(":")+2,certToParse.lastIndexOf("\""));
	System.out.println(cert);
	return cert;
}</code></pre>
            </div>
            <div class="p">The following code snippet invokes the People REST Web Service:
              <pre class="pre codeblock"><code>public void getPeople(String hostName, String certificate, String employeeId){
	String apiUrl = "https://"+hostName+"/v1/people/"+employeeId;
	String apiResponse = callGetApi(apiUrl,certificate);
	System.out.println("apiResponse "+apiResponse);
}

public String callGetApi(String apiUrl, String certificate) {
	String jSonResponse = "";
	DefaultHttpClient httpClient = new DefaultHttpClient();
	HttpGet getRequest = new HttpGet(apiUrl);
	getRequest.addHeader("accept", "application/json");
	getRequest.addHeader("SabaCertificate", certificate);
	try{
		  HttpResponse response = httpClient.execute(getRequest);
		  if (response.getStatusLine().getStatusCode() != 200) {
				throw new RuntimeException("Failed : HTTP error code : "
				   + response.getStatusLine().getStatusCode());
		  }
		  BufferedReader br = new BufferedReader(
			   new InputStreamReader((response.getEntity().getContent())));
		  String output;
		  while ((output = br.readLine()) != null) {
				jSonResponse = output;
		  }

		  httpClient.getConnectionManager().shutdown();
		  return jSonResponse;
	}catch(Exception e){e.printStackTrace();}
	return "";
}

public static void main (String args[]) {
	SabaRestApiSpcTestClientJava restClient = new SabaRestApiSpcTestClientJava();
	String cert = restClient.getSabaCertificate("https://10.15.20.101", "uone", "welcome", "SabaSite");
	restClient.getPeople("10.15.20.101", cert, "emplo000000000001000");
}</code></pre>
            </div>
          </div>
        </article>
        <article class="topic nested2" aria-labelledby="ariaid-title7" id="topic_d5g_mzb_xt">
          <h5 class="title topictitle3" id="ariaid-title7">Enabling REST Web Services in Saba</h5>
          <div class="body">
            <p class="p">By default the REST Web Services are disabled. To enable REST Web Services in Saba, submit a support request.
              For assistance, contact Saba Support. </p>
          </div>
        </article>
        <article class="topic nested2" aria-labelledby="ariaid-title8" id="topic_fd4_xfm_w5">
          <h5 class="title topictitle3" id="ariaid-title8">Using custom fields with the supported data types and values</h5>
          <div class="body">
            <p class="p">The following are a few examples that depict how to use the custom fields with the supported data types and values:</p>
            <div class="p">
              <strong class="ph b">INTEGER</strong>
              <pre class="pre codeblock"><code>{
	"@type": "CustomAttributeValueDetail",
	"name": "custom3",
	"datatype": {
		"@type": "CustomAttributeDatatype",
		"value": 1
	},
	"value": 11,
	"displayName": "custom3"
}</code></pre>
            </div>
            <div class="p">
              <strong class="ph b">REAL</strong>
              <pre class="pre codeblock"><code>{
    "@type": "CustomAttributeValueDetail",
    "name": "custom1",
    "datatype": {
        "@type": "CustomAttributeDatatype",
        "value": 2
        },
    "value": [
        "java.math.BigDecimal",
        1.55
        ],
    "displayName": "custom1"
}</code></pre>
            </div>
            <p class="p">
              <strong class="ph b">BOOLEAN</strong>
            </p>
            <div class="p">
              <pre class="pre codeblock"><code>{
    "@type": "CustomAttributeValueDetail",
    "name": "custom2",
    "datatype": {
		"@type": "CustomAttributeDatatype",
        "value": 9
        },
    "value": true,
    "displayName": "custom2"
}</code></pre>
            </div>
            <div class="p">
              <strong class="ph b">DATE</strong>
              <pre class="pre codeblock"><code>{
   "@type":"CustomAttributeValueDetail",
   "name":"custom9",
   "datatype":{
      "@type":"CustomAttributeDatatype",
      "value":10
   },
   "value":{
      "@type":"date",
      "time":"2016-01-26"
   },
   "displayName":"custom9"
}</code></pre>
            </div>
            <p class="p">
              <strong class="ph b">TIME</strong>
            </p>
            <div class="p">
              <pre class="pre codeblock"><code>{
	"@type":"CustomAttributeValueDetail",
    "name":"custom4",
    "datatype":{
        "@type":"CustomAttributeDatatype",
        "value":10
     },
     "value":{
        "@type":"date",
        "time":"2016-01-26 11:11:11"
    },
    "displayName":"custom4"
}</code></pre>
            </div>
          </div>
        </article>
      </article>
      </article>
  </main>
</body>

</html>
